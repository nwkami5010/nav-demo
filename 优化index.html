<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>我的导航</title>
</head>
<body>
    <header></header>
    <main>
        <style>
            .key{
                width:50px;
                width:40px; 
                background: linear-gradient(to bottom, #292929 0%,#111111 100%);
                border:1px solid #373737;
                color:c5c5c5;
                border-radius: 6px;
                box-shadow: 0 0 0 1px #1a1b1c, 0 0 0 2px #1f2020, 0 3px 02px #080808;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
            .row{
                margin: 16px;
            }
            .row .key {
                margin: 0 20px;
            }
            
            
        </style>
        <kbd>A</kbd>
        <div class="wrapper" id="mainXXXXX">
          
            
        </div>
    </main>
    <footer></footer>
    <script>
        //1.初始化数据
        var keys= {
            0: ['q','w','e','r','t','y','u','i','o','p'],
            1: ['a','s','d','f','g','h','j','k','l'],
            2:['z','x','c','v','b','n','m'],
            length:3
        }
        var hash = {
            q:'qq.com',
            w:'weibo.com',
            e:'ele.me',
            r:'renren.com',
            t:'tianya.com',
            y:'yahoo.cn',
            u: 'uc.com',
            i: 'iqiyi.com',
            o: 'opera.com',
            p: 'pronhub.com',
            a: 'acfun.tv',
            s: 'sohu.com',
            m:'mcdonalds.com.cn'
        }
        //取出localstorge中的zzz对应的hash
        var hashInLocalStorage = getFormLoaclStorage('zzz')
        if(hashInLocalStorage){
            hash = hashInLocalStorage
        }    
        function getFormLoaclStorage(name){
          return  JSON.parse( localStorage.getItem(name) || 'null')
        }


        function tag (tagName,attributes){
            var element =  document.createElement(tagName)
            for(var key in attributes){  //key 位className id textCont
                element[key] = attributes[hey]
            }
            return element
        }
        //2.生成键盘

        //遍历keys,生成kbd标签
        for(var index=0; index<keys['length']; index = index+1){}
          var index = 0
           while(index<keys['length']){//0 1 2
            var div = tag('div', {className: 'row'})
           // div.className = 'row' 同上一行合并
            main.appendChild(div)
           var row = keys[index]//第一个数组 第二个数组 第三个数组
            console.log(row)
           var index2 = 0
            while(index2<row['length']){  //这一行长度 0-9 0-8 0-6
                var kbd = tag('kbd')
                var span = tag('span')
                kbd.textContent = 'row[index2]'
                kbd.className = 'key'
                var   button = tag('button')
                button.textContent = '编辑'
                button.id = row [index2]
                var img = tag('img')
                if(hash[row[index2]]){//如果hash路径是存在的，路径设置成src
                    img.src = 'http://'+hash[row[index2]]+'/favicon.ico'
                }else{
                    img.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'
                }
                 img.onerror = function(xxx){
                     xxx.target.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'

                 }   //监听请求失败事件



                button.onclick= function(kkp){
                    //就是用户点击的元素 kkp['target]
                    var button2 = xxp['target']
                     console.log(button2.previousSibling)//上一个元素
                   var img2 = button2.previousSibling
                   var   key = button2['id']//qwert
                    var  x=prompt('给我一个网址')//qq.co,
                   hash[key] = x //hash变更
                   img2.src = 'http://'+x+'/favicon.ico'
                   img2.onerror = function(xxx){
                       xxx.target.src = '//i.loli.net/2017/11/10/5a05afbc5e183.png'
                   }
                   localStorage.setItem('uuu',JSON.stringify(hash))
               
               
                }
                kbd.appendChild(button)
                div.appendChild(kbd)
                index2 =index2 + 1
            }
            
               index= index+1
           }  

           //3.监听键盘
            main.onkeypress = function(kkp){
               var  key = kkp['key']
               var website = hash[hey]
                //location.href = 'http://'+website
                window.open('http://'+website, '_blank')
                
                
                
                
                
               
            }   
    </script>
    <div class="wrapper" id="main"></div>
</body>
</html>